
#include <avr/io.h> // Se incluye la librería de entrada/salida del microcontrolador AVR
#include <avr/interrupt.h> // Se incluye la librería para manejar interrupciones
#include <avr/pgmspace.h> // Se incluye la librería para almacenar datos en memoria de programa (Flash)

#include "uart.h" // Se incluye la librería personalizada para comunicación UART
#include "ws2812.h" // Se incluye la librería para controlar la matriz LED WS2812B

#define ANCHO 16 // Se define que la matriz tiene 16 columnas
#define ALTURA 16 // Se define que la matriz tiene 16 filas
#define LEDS 256 // Se define el total de LEDs (16x16 = 256)

volatile uint32_t millis_count = 0; // Variable volátil para almacenar el conteo de milisegundos
uint8_t animacion_actual = 1; // Variable que guarda el número de animación seleccionada por UART

uint8_t brillo = 40; // Se define la variable del brillo (15%), ya que al ser tan grande la matriz, requiere mucha corriente, lo que distorsiona los colores a máxima luminosidad
// Macro para escalar un valor de color según el brillo global
#define ESCALA(x)   ((uint8_t)(((uint16_t)(x) * brillo) >> 8))

// Función que envía un color RGB ya escalado a un LED específico de la matriz
void setRGB_scaled(uint16_t index, uint8_t r, uint8_t g, uint8_t b)
{
	ws2812_setRGB(index, ESCALA(r), ESCALA(g), ESCALA(b)); // Se envía el color aplicando el brillo
}

// Interrupción del Timer0: se ejecuta cada vez que el temporizador desborda
ISR(TIMER0_OVF_vect)
{
	millis_count++; // Se incrementa el conteo de milisegundos acumulados
}

// Función que devuelve el tiempo en milisegundos desde el inicio del programa
uint32_t millis(void)
{
	uint32_t m;
	cli(); // Se deshabilitan interrupciones para evitar lecturas inconsistentes
	m = millis_count; // Se copia el valor seguro del contador
	sei(); // Se vuelven a habilitar interrupciones
	return m; // Se retorna el tiempo actual
}

// Inicializa el Timer0 para generar una interrupción periódica y usarlo como base de tiempo
void iniciar_timer0(void)
{
	TCCR0A = 0; // Se limpia la configuración del Timer0 (normal mode)
	TCCR0B = (1 << CS01) | (1 << CS00); // Prescaler 64 ? genera overflow cada ~1 ms a 16 MHz
	TIMSK0 = (1 << TOIE0); // Se habilita la interrupción por overflow del Timer0
}

const uint8_t corazon_f1[256][3] PROGMEM = {
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{255,255,255},{255,255,255},
	{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{0,0,0},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},
	{0,0,0},{255,0,0},{255,0,0},{255,255,255},{255,255,255},{255,0,0},{255,0,0},{0,0,0},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},
	{0,0,0},{255,0,0},{255,255,255},{255,255,255},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},
	{0,0,0},{255,0,0},{255,255,255},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},
	{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},
	{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},
	{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},
	{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255}
};

const uint8_t corazon_f2[256][3] PROGMEM = {
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{0,0,0},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},
	{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,255,255},{255,255,255},{255,0,0},{0,0,0},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},
	{255,255,255},{0,0,0},{255,0,0},{255,255,255},{255,255,255},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},
	{255,255,255},{0,0,0},{255,0,0},{255,255,255},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},
	{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},
	{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},
	{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{182,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255}
};

const uint8_t corazon_f3[256][3] PROGMEM = {
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{0,0,0},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,255,255},{255,255,255},{255,0,0},{0,0,0},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,255,255},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{182,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255}
};

const uint8_t corazon_f4[256][3] PROGMEM = {
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{0,0,0},{0,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,255,255},{255,255,255},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,255,255},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,255,255},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{182,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255}
};

const uint8_t corazon_f5[256][3] PROGMEM = {
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,255,255},{255,255,255},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{0,0,0},{0,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,255,255},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,255,255},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{182,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255}
};

const uint8_t corazon_f6[256][3] PROGMEM = {
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,255,255},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{182,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255}
};

const uint8_t pokebola_f1[256][3] PROGMEM = {
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{255,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{254,105,105},{255,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},
	{255,255,255},{0,0,0},{255,0,0},{255,0,0},{254,105,105},{255,255,255},{254,105,105},{255,0,0},{255,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{0,0,0},{255,255,255},
	{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{254,105,105},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{0,0,0},{255,255,255},
	{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{0,0,0},
	{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{0,0,0},{0,0,0},{255,0,0},{255,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{0,0,0},
	{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{0,0,0},{255,255,255},{255,255,255},{0,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{0,0,0},
	{0,0,0},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{182,0,0},{182,0,0},{182,0,0},{0,0,0},{0,0,0},
	{0,0,0},{255,255,255},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{184,184,184},{0,0,0},
	{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{255,255,255},{255,255,255},{0,0,0},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{0,0,0},
	{255,255,255},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{0,0,0},{255,255,255},
	{255,255,255},{0,0,0},{184,184,184},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{0,0,0},{255,255,255},
	{255,255,255},{255,255,255},{0,0,0},{184,184,184},{184,184,184},{184,184,184},{255,255,255},{255,255,255},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{0,0,0},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255}
};

const uint8_t pokebola_f2[256][3] PROGMEM = {
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{255,255,255},{254,105,105},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{0,0,0},{255,0,0},{255,0,0},{254,105,105},{255,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},
	{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{0,0,0},{255,255,255},
	{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{0,0,0},{255,255,255},
	{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{0,0,0},{0,0,0},{255,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{0,0,0},
	{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{0,0,0},{255,255,255},{255,255,255},{0,0,0},{255,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{0,0,0},
	{0,0,0},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{182,0,0},{182,0,0},{182,0,0},{0,0,0},{0,0,0},
	{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},
	{0,0,0},{255,255,255},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{184,184,184},{0,0,0},
	{0,0,0},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{184,184,184},{184,184,184},{184,184,184},{0,0,0},
	{255,255,255},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{0,0,0},{255,255,255},
	{255,255,255},{0,0,0},{184,184,184},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{0,0,0},{255,255,255},
	{255,255,255},{255,255,255},{0,0,0},{184,184,184},{184,184,184},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{0,0,0},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255}
};

const uint8_t pokebola_f3[256][3] PROGMEM = {
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{182,0,0},{182,0,0},{182,0,0},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},
	{255,255,255},{0,0,0},{255,255,255},{255,255,255},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{0,0,0},{255,255,255},
	{255,255,255},{0,0,0},{255,0,0},{255,0,0},{255,0,0},{255,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{0,0,0},{255,255,255},
	{0,0,0},{255,0,0},{255,0,0},{255,0,0},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{182,0,0},{182,0,0},{182,0,0},{0,0,0},
	{0,0,0},{255,0,0},{255,0,0},{0,0,0},{184,184,184},{141,141,141},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{141,141,141},{141,141,141},{0,0,0},{182,0,0},{182,0,0},{0,0,0},
	{0,0,0},{0,0,0},{0,0,0},{184,184,184},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{141,141,141},{0,0,0},{0,0,0},{0,0,0},
	{0,0,0},{0,0,0},{184,184,184},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{141,141,141},{0,0,0},{0,0,0},
	{0,0,0},{184,184,184},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{184,184,184},{0,0,0},
	{0,0,0},{255,255,255},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{184,184,184},{0,0,0},
	{255,255,255},{0,0,0},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{184,184,184},{184,184,184},{0,0,0},{255,255,255},
	{255,255,255},{0,0,0},{184,184,184},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{184,184,184},{184,184,184},{0,0,0},{255,255,255},
	{255,255,255},{255,255,255},{0,0,0},{184,184,184},{184,184,184},{184,184,184},{255,255,255},{255,255,255},{255,255,255},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{0,0,0},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255}
};

const uint8_t pokebola_f4[256][3] PROGMEM = {
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{182,0,0},{182,0,0},{182,0,0},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,0,0},{0,0,0},{0,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{0,0,0},{255,255,255},{255,255,255},
	{255,255,255},{0,0,0},{255,255,255},{255,255,255},{255,0,0},{255,0,0},{0,0,0},{255,255,255},{255,255,255},{0,0,0},{182,0,0},{182,0,0},{182,0,0},{182,0,0},{0,0,0},{255,255,255},
	{255,255,255},{0,0,0},{255,0,0},{255,0,0},{0,0,0},{0,0,0},{184,184,184},{0,0,0},{0,0,0},{184,184,184},{0,0,0},{0,0,0},{182,0,0},{182,0,0},{0,0,0},{255,255,255},
	{0,0,0},{255,0,0},{255,0,0},{0,0,0},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{141,141,141},{141,141,141},{184,184,184},{184,184,184},{0,0,0},{182,0,0},{182,0,0},{0,0,0},
	{0,0,0},{0,0,0},{0,0,0},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{141,141,141},{141,141,141},{184,184,184},{0,0,0},{0,0,0},{0,0,0},
	{0,0,0},{0,0,0},{184,184,184},{184,184,184},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{141,141,141},{184,184,184},{0,0,0},{0,0,0},
	{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},
	{0,0,0},{184,184,184},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{184,184,184},{0,0,0},
	{0,0,0},{255,255,255},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{184,184,184},{0,0,0},
	{255,255,255},{0,0,0},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{184,184,184},{184,184,184},{0,0,0},{255,255,255},
	{255,255,255},{0,0,0},{184,184,184},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{184,184,184},{184,184,184},{0,0,0},{255,255,255},
	{255,255,255},{255,255,255},{0,0,0},{184,184,184},{184,184,184},{184,184,184},{255,255,255},{255,255,255},{255,255,255},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{0,0,0},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255}
};

const uint8_t pokebola_f5[256][3] PROGMEM = {
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,0,0},{255,0,0},{0,0,0},{0,0,0},{182,0,0},{182,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,0,0},{182,0,0},{0,0,0},{0,0,0},{255,255,255},{184,184,184},{0,0,0},{0,0,0},{182,0,0},{182,0,0},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,0,0},{0,0,0},{0,0,0},{184,184,184},{184,184,184},{0,0,0},{0,0,0},{141,141,141},{141,141,141},{0,0,0},{0,0,0},{182,0,0},{255,255,255},{255,255,255},
	{255,255,255},{255,0,0},{0,0,0},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{141,141,141},{141,141,141},{141,141,141},{141,141,141},{141,141,141},{0,0,0},{182,0,0},{255,255,255},
	{255,255,255},{255,0,0},{0,0,0},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{141,141,141},{141,141,141},{141,141,141},{141,141,141},{141,141,141},{0,0,0},{182,0,0},{255,255,255},
	{182,0,0},{0,0,0},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{141,141,141},{141,141,141},{141,141,141},{141,141,141},{141,141,141},{0,0,0},{182,0,0},
	{0,0,0},{0,0,0},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{141,141,141},{141,141,141},{141,141,141},{141,141,141},{141,141,141},{0,0,0},{0,0,0},
	{0,0,0},{0,0,0},{0,0,0},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{141,141,141},{141,141,141},{141,141,141},{141,141,141},{141,141,141},{0,0,0},{0,0,0},{0,0,0},
	{0,0,0},{0,0,0},{0,0,0},{0,0,0},{184,184,184},{184,184,184},{184,184,184},{141,141,141},{141,141,141},{141,141,141},{141,141,141},{141,141,141},{0,0,0},{0,0,0},{0,0,0},{0,0,0},
	{0,0,0},{184,184,184},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{255,255,255},{0,0,0},
	{0,0,0},{184,184,184},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{255,255,255},{0,0,0},
	{255,255,255},{0,0,0},{255,255,255},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{184,184,184},{0,0,0},{255,255,255},
	{255,255,255},{0,0,0},{184,184,184},{255,255,255},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{184,184,184},{184,184,184},{0,0,0},{255,255,255},
	{255,255,255},{255,255,255},{0,0,0},{184,184,184},{255,255,255},{255,255,255},{255,255,255},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{0,0,0},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{184,184,184},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},
	{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{0,0,0},{255,255,255},{255,255,255},{255,255,255},{255,255,255},{255,255,255}
};

// Arreglo de punteros a los fotogramas de la animación de la pokebola
// Cada puntero apunta a una matriz 256x3 almacenada en PROGMEM
const uint8_t (*pokebola[5])[3] = {
	pokebola_f1, pokebola_f2, pokebola_f3,
	pokebola_f4, pokebola_f5
};

// Arreglo de punteros a los fotogramas de la animación del corazón (6 frames)
const uint8_t (*corazon[6])[3] = {
	corazon_f1, corazon_f2, corazon_f3,
	corazon_f4, corazon_f5, corazon_f6
};

uint8_t fotograma = 0;          // Índice del fotograma actual dentro de la animación
int8_t direccion = 1;           // Dirección del avance de fotogramas: 1 = adelante, -1 = atrás (efecto ping-pong)
uint32_t ultimo_fotograma = 0;  // Marca de tiempo (en ms) del último cambio de fotograma

// Calcula el índice lineal del LED según fila y columna considerando el cableado en zigzag
uint16_t zigzag_index(uint8_t fila, uint8_t col)
{
	uint8_t col_inv = (ANCHO - 1 - col); // Columna invertida para compensar el serpenteo físico

	// Si la fila es par, se recorre en un sentido; si es impar, en el contrario
	if (fila % 2 == 0)
		return fila * ANCHO + col_inv;
	else
		return fila * ANCHO + (ANCHO - 1 - col_inv);
}

// Muestra un fotograma en la matriz aplicando el mapeo zigzag
// 'fotograma' es una matriz 256x3 con los valores RGB almacenados en PROGMEM
void mostrar_frame_zigzag(const uint8_t fotograma[][3])
{
	for (uint8_t fila = 0; fila < ALTURA; fila++)
	{
		for (uint8_t col = 0; col < ANCHO; col++)
		{
			// Índice “lógico” dentro del frame (orden fila/columna normal)
			uint16_t src = fila * ANCHO + col;
			// Índice “físico” según cómo está cableada la matriz
			uint16_t dst = zigzag_index(fila, col);

			// Leer los componentes RGB desde memoria de programa
			uint8_t r = pgm_read_byte(&fotograma[src][0]);
			uint8_t g = pgm_read_byte(&fotograma[src][1]);
			uint8_t b = pgm_read_byte(&fotograma[src][2]);

			// Enviar el color al LED correspondiente, aplicando el brillo global
			setRGB_scaled(dst, r, g, b);
		}
	}

	// Actualizar la matriz físicamente (enviar datos a los LEDs)
	ws2812_show();
}

// Prueba automática de colores básicos (rojo, verde, azul y blanco) en toda la matriz
void test_colores_auto(void)
{
	// Colores de prueba: R, G, B y blanco
	const uint8_t colores[4][3] = {
		{255,   0,   0},
		{  0, 255,   0},
		{  0,   0, 255},
		{255, 255, 255}
	};

	for (uint8_t i = 0; i < 4; i++)
	{
		// Pinta todos los LEDs con el color actual
		for (uint16_t p = 0; p < LEDS; p++)
			setRGB_scaled(p, colores[i][0], colores[i][1], colores[i][2]);

		ws2812_show(); // Refresca la matriz

		// Mantiene el color durante 500 ms
		uint32_t t0 = millis();
		while (millis() - t0 < 500);
	}
}

int main(void)
{
    UART_INICIAR(103);   // Inicializa UART (por ejemplo, 9600 baudios a 16 MHz)
    ws2812_init();       // Inicializa el controlador de la matriz WS2812
    iniciar_timer0();    // Configura el Timer0 para la función millis()
    sei();               // Habilita interrupciones globales

    // Mensajes iniciales por UART
    UART_IMPRIMIR("ANIMACIONES EN RGB\r\n");
    UART_IMPRIMIR("Comandos disponibles:\r\n");
    UART_IMPRIMIR("0 - Test RGB automatico\r\n");
    UART_IMPRIMIR("1 - Animacion Corazon\r\n");
    UART_IMPRIMIR("2 - Animacion Pokebola\r\n\r\n");

    while (1){
        // Revisión de comandos recibidos por UART
        if (UART_DISPONIBLE()) {
            char c = UART_LEER();  // Lee el carácter recibido

            if (c == '1') {
                // Selecciona animación de corazón
                animacion_actual = 1;
                fotograma = 0;      // Reinicia desde el primer frame
                direccion = 1;      // Comienza avanzando hacia adelante
                UART_IMPRIMIR("Animacion Corazon\r\n");

            } else if (c == '2') {
                // Selecciona animación de pokebola
                animacion_actual = 2;
                fotograma = 0;      // Reinicia desde el primer frame
                direccion = 1;      // Comienza avanzando hacia adelante
                UART_IMPRIMIR("Animacion Pokebola\r\n");

            } else if (c == '0') {
                // Ejecuta el test de colores
                UART_IMPRIMIR("Test RGB automatico\r\n");
                test_colores_auto();
            }
        }

        // Actualización de animación cada 100 ms (≈10 fotogramas por segundo)
        if (millis() - ultimo_fotograma > 100){
            // Cantidad de fotogramas según la animación elegida
            uint8_t total_frames = (animacion_actual == 1) ? 6 : 5;

            // Muestra el fotograma actual de la animación correspondiente
            if (animacion_actual == 1)
                mostrar_frame_zigzag(corazon[fotograma]);
            else
                mostrar_frame_zigzag(pokebola[fotograma]);

            // Avanza el índice del fotograma en la dirección actual
            fotograma += direccion;

            // Inversión de sentido para lograr efecto ping-pong
            if (direccion > 0 && fotograma >= total_frames - 1)
                direccion = -1;      // Cuando llega al último, empieza a retroceder
            else if (direccion < 0 && fotograma == 0)
                direccion = 1;       // Cuando vuelve al primero, vuelve a avanzar

            // Actualiza el tiempo de cambio de frame
            ultimo_fotograma = millis();
        }
    }
}
